<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<style>
body {
	
}

.button {
	background-color: blue;
	border: 1px;
	color: WHITE;
	padding: 15px 32px;
	text-align: center;
	text-decoration: none;
	display: inline-block;
	font-size: 16px;
	margin: 4px 2px;
	cursor: pointer;
}

table, th, td {
	border: 1px solid grey;
	border-collapse: collapse;
	padding: 5px;
}

table tr:nth-child(odd) {
	background-color: #f1f1f1;
}

table tr:nth-child(even) {
	background-color: #ffffff;
}
</style>
</head>
<body>
	<div ng-app="myApp" ng-controller="productController">
		<br>
		<button type="button" class="btn btn-primary" ng-click="addProduct()">Add
			New Product</button>
		<button type="button" class="btn btn-info">Info</button>

		<br> <br>
		<table style="border-color: #efeded">
			<tr>
				<th></th>
				<th>PRODUCTID</th>
				<th>SUPPLIER</th>
				<th>PRODUCTNAME</th>
				<th>CATEGORY</th>
				<th>PRODUCTINFORMATION</th>
				<th>QUANTITY</th>
				<th>PRICE</th>
				<th>ACTION</th>
			</tr>
			<tr ng-repeat="item in products">
				<td><input type="checkbox" value="" ng-model="item.isSelected"></td>
				<td>{{item.productId}}</td>
				<td>{{item.supplier}}</td>
				<td>{{item.productName}}</td>
				<td>{{item.category}}</td>
				<td>{{item.productInformation}}</td>
				<td>{{item.quantity}}</td>
				<td>{{item.price}}</td>
				<td><input type="button" value="Remove" class="btn btn-danger" ng-click="removeProduct(item.productId)"/> |
				<input type="button" ng-click="update(i._links.self.href)" class="btn btn-primary"
					value="Update" /></td>
			</tr>
		</table>
	</div>
	<script
		src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
	<script>
		var app = angular.module('myApp', []);
		app.controller('productController', function($scope, $http) {
			$scope.selectedProducts = [];
			$scope.products={};
			$http.get("http://localhost:8080/product/productList").then(
					function(response) {
						$scope.products = response.data;
					});
			$scope.addProduct = function() {
				window.location = "addNewProduct.html";
			};
			$scope.removeProduct = function(productId){				
				var index = -1;		
				var comArr = eval( $scope.products );
				for( var i = 0; i < comArr.length; i++ ) {
					if( comArr[i].productId === productId ) {
						index = i;
						break;
					}
				}
				if( index === -1 ) {
					alert( "Something gone wrong" );
				}
				$scope.companies.splice( index, 1 );		
			};
			$scope.delete=function(n){
		          $scope.products.splice(n,1);  
		        };
			$scope.goToNextPage = function() {
				angular.forEach($scope.products, function(product) {
					if (product.isSelected) {
						$scope.selectedProducts.push(product);
					}
				});
				sessionStorage.setProduct("selectedProducts", JSON
						.stringify($scope.selectedProducts));
				// $location.url('example.html');
				window.location = "confirmOrder.html";
			}

		});
		
		
	</script>
	<div align="right">
		<button class="button" ng-click="goToNextPage()">ADD TO CART</button>
	</div>
</body>
</html>